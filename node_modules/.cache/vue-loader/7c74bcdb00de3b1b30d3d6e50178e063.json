{"remainingRequest":"/opt/homebrew/lib/node_modules/@vue/cli-service-global/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/chenyuxiang/Desktop/demo_erpject/tree_my_demo/MyTree.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/chenyuxiang/Desktop/demo_erpject/tree_my_demo/MyTree.vue","mtime":1650196245815},{"path":"/opt/homebrew/lib/node_modules/@vue/cli-service-global/node_modules/babel-loader/lib/index.js","mtime":1650181504710},{"path":"/opt/homebrew/lib/node_modules/@vue/cli-service-global/node_modules/cache-loader/dist/cjs.js","mtime":1650181500722},{"path":"/opt/homebrew/lib/node_modules/@vue/cli-service-global/node_modules/vue-loader/lib/index.js","mtime":1650181501030}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBfIGZyb20gImxvZGFzaCI7CmV4cG9ydCBkZWZhdWx0IHsKICAvLyBwcm9wczpbJ2FsbERhdGEnXSwKICBwcm9wczogewogICAgYWxsRGF0YTogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdDogKCkgPT4gW10sCiAgICB9LAogICAgZGllY3RvcnlEcm9wOkFycmF5LAogICAgZmlsZURyb3A6QXJyYXksCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZGF0YTogW10sCiAgICB9OwogIH0sCiAgd2F0Y2g6IHsKICAgIC8v55uR5o6n5pWw5o2u5Y+Y5YyW5bCx5pu05paw6KeG5Zu+CiAgICBhbGxEYXRhKCkgewogICAgICB0aGlzLnRyYW5zRGF0YSgpOwogICAgfSwKICAgIC8vIHsKICAgIC8vICAgICAgICAgICAgIGRhdGEudHlwZT8gPHNwYW4gY2xhc3M9J2VsLWljb24tZm9sZGVyJz4gOiA8c3BhbiBjbGFzcz0nZWwtaWNvbi1kb2N1bWVudCc+PC9zcGFuPgogICAgLy8gICAgICAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBpc1BhcmVudChkYXRhKSB7CiAgICAgIHJldHVybiBkYXRhLnR5cGUgPT0gInBhcmVudDEiOwogICAgfSwKICAgIHJlbmRlcihoLCB7IG5vZGUsIGRhdGEgfSkgewogICAgICBjb25zb2xlLmxvZyhub2RlLCBkYXRhLnR5cGUpOwogICAgICBsZXQgbGlzdCA9IHRoaXMuaXNQYXJlbnQoZGF0YSkgPyB0aGlzLmRpZWN0b3J5RHJvcCA6IHRoaXMuZmlsZURyb3A7CiAgICAgIGNvbnNvbGUubG9nKGxpc3QpOwogICAgICByZXR1cm4gKAogICAgICAgIDxkaXY+CiAgICAgICAgICB7dGhpcy5pc1BhcmVudChkYXRhKSA/ICgKICAgICAgICAgICAgKG5vZGUuZXhwYW5kZWQgJiYgbm9kZS5jaGlsZE5vZGVzLmxlbmd0aCAhPTApPyAoCiAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImVsLWljb24tZm9sZGVyLW9wZW5lZCI+PC9zcGFuPgogICAgICAgICAgICApIDogKAogICAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJlbC1pY29uLWZvbGRlciI+PC9zcGFuPgogICAgICAgICAgICApCiAgICAgICAgICApIDogKAogICAgICAgICAgICA8c3BhbiBjbGFzcz0iZWwtaWNvbi1kb2N1bWVudCI+PC9zcGFuPgogICAgICAgICAgKX0KCiAgICAgICAgICB7ZGF0YS5uYW1lfQogICAgICAgICAgPGVsLWRyb3Bkb3duIHBsYWNlbWVudD0iYm90dG9tLXN0YXJ0IiB0cmlnZ2VyPSJjbGljayI+CiAgICAgICAgICAgIDxzcGFuIGNsYXNzPSJlbC1kcm9wZG93bi1saW5rIj4KICAgICAgICAgICAgICA8aSBjbGFzcz0iZWwtaWNvbi1hcnJvdy1kb3duIGVsLWljb24tLXJpZ2h0Ij48L2k+CiAgICAgICAgICAgIDwvc3Bhbj4KICAgICAgICAgICAgPGVsLWRyb3Bkb3duLW1lbnUgc2xvdD0iZHJvcGRvd24iPgogICAgICAgICAgICB7bGlzdC5tYXAoaXRlbT0+KAogICAgICAgICAgICAgICAgPGVsLWRyb3Bkb3duLWl0ZW0+e2l0ZW0udmFsdWV9PC9lbC1kcm9wZG93bi1pdGVtPgogICAgICAgICAgICApKX0KICAgICAgICAgICAgPC9lbC1kcm9wZG93bi1tZW51PiAKICAgICAgICAgIDwvZWwtZHJvcGRvd24+CiAgICAgICAgPC9kaXY+CiAgICAgICk7CiAgICB9LAogICAgdHJhbnNEYXRhKCkgewogICAgICBsZXQgb3RoZXJEYXRhID0gXy5jbG9uZURlZXAodGhpcy5hbGxEYXRhKTsKICAgICAgY29uc29sZS5sb2cob3RoZXJEYXRhKTsKICAgICAgLy/mlbDmja7mmKDlsIQKICAgICAgLy97aWQ6MSx7bmFtZTogJ+aWh+S7tuWkuTEnLCBwaWQ6IDAsIGlkOiAxfX0KICAgICAgbGV0IHRyZWVNYXAgPSBvdGhlckRhdGEucmVkdWNlKChuZXdFbGUsIGVsZSkgPT4gewogICAgICAgIC8v5omA5Lul5pWw5o2u6KaB6L+b6KGM5YWL6ZqG5LiA5Lu9CiAgICAgICAgZWxlLmxhYmVsID0gZWxlLm5hbWU7CiAgICAgICAgbmV3RWxlW2VsZVsiaWQiXV0gPSBlbGU7CiAgICAgICAgcmV0dXJuIG5ld0VsZTsKICAgICAgfSwgW10pOyAvL3JlZHVjZeeahOe7k+aenOWwseaYr+S4quWvueixoQogICAgICBjb25zb2xlLmxvZyh0cmVlTWFwKTsKICAgICAgbGV0IHRyZWVEYXRhID0gdHJlZU1hcC5yZWR1Y2UoKGFyciwgY3VycmVudCkgPT4gewogICAgICAgIGxldCBwaWQgPSBjdXJyZW50LnBpZDsKICAgICAgICBsZXQgcGFyZW50ID0gdHJlZU1hcFtwaWRdOwogICAgICAgIGlmIChwYXJlbnQpIHsKICAgICAgICAgIHBhcmVudC5jaGlsZHJlbgogICAgICAgICAgICA/IHBhcmVudC5jaGlsZHJlbi5wdXNoKGN1cnJlbnQpCiAgICAgICAgICAgIDogKHBhcmVudC5jaGlsZHJlbiA9IFtjdXJyZW50XSk7CiAgICAgICAgfSBlbHNlIGlmIChwaWQgPT09IDApIHsKICAgICAgICAgIGFyci5wdXNoKGN1cnJlbnQpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gYXJyOwogICAgICB9LCBbXSk7CiAgICAgIGNvbnNvbGUubG9nKHRyZWVEYXRhKTsKICAgICAgLy92dWUg5Lit55qEdnVleOa6kOeggeWwseaYr+i/meagtwogICAgICAvL3JlZHVjZeWHj+WwkeW+queOr+mAkuW9kuasoeaVsAogICAgICB0aGlzLmRhdGEgPSB0cmVlRGF0YTsKICAgIH0sCiAgfSwKICBtb3VudGVkKCkge30sCn07Cg=="},{"version":3,"sources":["MyTree.vue"],"names":[],"mappings":";;;;;;;;;;;;;;AAcA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MyTree.vue","sourceRoot":".","sourcesContent":["<template>\n  <div>\n    <!-- v-if=\"data.length\"避免重复渲染 -->\n    <el-tree\n      :data=\"data\"\n      v-if=\"data.length\"\n      :default-expand-all=\"true\"\n      :render-content=\"render\"\n      :expand-on-click-node=\"false\"\n    ></el-tree>\n  </div>\n</template>\n\n<script>\nimport _ from \"lodash\";\nexport default {\n  // props:['allData'],\n  props: {\n    allData: {\n      type: Array,\n      default: () => [],\n    },\n    diectoryDrop:Array,\n    fileDrop:Array,\n  },\n  data() {\n    return {\n      data: [],\n    };\n  },\n  watch: {\n    //监控数据变化就更新视图\n    allData() {\n      this.transData();\n    },\n    // {\n    //             data.type? <span class='el-icon-folder'> : <span class='el-icon-document'></span>\n    //         }\n  },\n  methods: {\n    isParent(data) {\n      return data.type == \"parent1\";\n    },\n    render(h, { node, data }) {\n      console.log(node, data.type);\n      let list = this.isParent(data) ? this.diectoryDrop : this.fileDrop;\n      console.log(list);\n      return (\n        <div>\n          {this.isParent(data) ? (\n            (node.expanded && node.childNodes.length !=0)? (\n              <span class=\"el-icon-folder-opened\"></span>\n            ) : (\n              <span class=\"el-icon-folder\"></span>\n            )\n          ) : (\n            <span class=\"el-icon-document\"></span>\n          )}\n\n          {data.name}\n          <el-dropdown placement=\"bottom-start\" trigger=\"click\">\n            <span class=\"el-dropdown-link\">\n              <i class=\"el-icon-arrow-down el-icon--right\"></i>\n            </span>\n            <el-dropdown-menu slot=\"dropdown\">\n            {list.map(item=>(\n                <el-dropdown-item>{item.value}</el-dropdown-item>\n            ))}\n            </el-dropdown-menu> \n          </el-dropdown>\n        </div>\n      );\n    },\n    transData() {\n      let otherData = _.cloneDeep(this.allData);\n      console.log(otherData);\n      //数据映射\n      //{id:1,{name: '文件夹1', pid: 0, id: 1}}\n      let treeMap = otherData.reduce((newEle, ele) => {\n        //所以数据要进行克隆一份\n        ele.label = ele.name;\n        newEle[ele[\"id\"]] = ele;\n        return newEle;\n      }, []); //reduce的结果就是个对象\n      console.log(treeMap);\n      let treeData = treeMap.reduce((arr, current) => {\n        let pid = current.pid;\n        let parent = treeMap[pid];\n        if (parent) {\n          parent.children\n            ? parent.children.push(current)\n            : (parent.children = [current]);\n        } else if (pid === 0) {\n          arr.push(current);\n        }\n        return arr;\n      }, []);\n      console.log(treeData);\n      //vue 中的vuex源码就是这样\n      //reduce减少循环递归次数\n      this.data = treeData;\n    },\n  },\n  mounted() {},\n};\n</script>\n\n<style scoped>\n.el-dropdown-link {\n    cursor: pointer;\n    color: #409EFF;\n  }\n  .el-icon-arrow-down {\n    font-size: 12px;\n  }\n  .el-dropdown-menu .el-popper{\n    left: 135px;\n  }\n</style>"]}]}