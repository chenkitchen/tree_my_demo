{"remainingRequest":"/opt/homebrew/lib/node_modules/@vue/cli-service-global/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/chenyuxiang/Desktop/demo_erpject/tree_my_demo/MyTree.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/chenyuxiang/Desktop/demo_erpject/tree_my_demo/MyTree.vue","mtime":1650188733543},{"path":"/opt/homebrew/lib/node_modules/@vue/cli-service-global/node_modules/babel-loader/lib/index.js","mtime":1650181504710},{"path":"/opt/homebrew/lib/node_modules/@vue/cli-service-global/node_modules/cache-loader/dist/cjs.js","mtime":1650181500722},{"path":"/opt/homebrew/lib/node_modules/@vue/cli-service-global/node_modules/vue-loader/lib/index.js","mtime":1650181501030}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBfIGZyb20gImxvZGFzaCI7CmV4cG9ydCBkZWZhdWx0IHsKICAvLyBwcm9wczpbJ2FsbERhdGEnXSwKICBwcm9wczogewogICAgYWxsRGF0YTogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdDogKCkgPT4gW10sCiAgICB9LAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGRhdGE6IFtdLAogICAgfTsKICB9LAogIHdhdGNoOiB7Ly/nm5HmjqfmlbDmja7lj5jljJblsLHmm7TmlrDop4blm74KICAgIGFsbERhdGEoKSB7CiAgICAgICAgdGhpcy50cmFuc0RhdGEoKTsKICAgIH0sCiAgICAvLyB7CiAgICAvLyAgICAgICAgICAgICBkYXRhLnR5cGU/IDxzcGFuIGNsYXNzPSdlbC1pY29uLWZvbGRlcic+IDogPHNwYW4gY2xhc3M9J2VsLWljb24tZG9jdW1lbnQnPjwvc3Bhbj4KICAgIC8vICAgICAgICAgfQogIH0sCiAgbWV0aG9kczogewogICAgaXNQYXJlbnQoZGF0YSl7CiAgICAgICAgcmV0dXJuIGRhdGEudHlwZSA9PSAncGFyZW50MScKICAgIH0sCiAgICByZW5kZXIoaCwgeyBub2RlLCBkYXRhIH0pewogICAgICAgIGNvbnNvbGUubG9nKG5vZGUsIGRhdGEudHlwZSk7CiAgICAgICAgcmV0dXJuICg8ZGl2PgogICAgICAgIHt0aGlzLmlzUGFyZW50KGRhdGEpPyBub2RlLmV4cGFuZGVkPyA8c3BhbiBjbGFzcz0nZWwtaWNvbi1mb2xkZXInPjwvc3Bhbj46PHNwYW4gY2xhc3M9J2VsLWljb24tZm9sZGVyJz48L3NwYW4+OjxzcGFuIGNsYXNzPSdlbC1pY29uLWRvY3VtZW50Jz48L3NwYW4+fQogICAgICAgIAogICAgICAgIHtkYXRhLm5hbWV9IAogICAgICAgIAogICAgICAgIDwvZGl2PikKICAgIH0sCiAgICB0cmFuc0RhdGEoKSB7CiAgICAgIGxldCBvdGhlckRhdGEgPSBfLmNsb25lRGVlcCh0aGlzLmFsbERhdGEpOwogICAgICBjb25zb2xlLmxvZyhvdGhlckRhdGEpOwogICAgICAvL+aVsOaNruaYoOWwhAogICAgICAvL3tpZDoxLHtuYW1lOiAn5paH5Lu25aS5MScsIHBpZDogMCwgaWQ6IDF9fQogICAgICBsZXQgdHJlZU1hcCA9IG90aGVyRGF0YS5yZWR1Y2UoKG5ld0VsZSwgZWxlKSA9PiB7CiAgICAgICAgLy/miYDku6XmlbDmja7opoHov5vooYzlhYvpmobkuIDku70KICAgICAgICBlbGUubGFiZWwgPSBlbGUubmFtZTsKICAgICAgICBuZXdFbGVbZWxlWyJpZCJdXSA9IGVsZTsKICAgICAgICByZXR1cm4gbmV3RWxlOwogICAgICB9LCBbXSk7IC8vcmVkdWNl55qE57uT5p6c5bCx5piv5Liq5a+56LGhCiAgICAgIGNvbnNvbGUubG9nKHRyZWVNYXApOwogICAgICBsZXQgdHJlZURhdGEgPSB0cmVlTWFwLnJlZHVjZSgoYXJyLCBjdXJyZW50KSA9PiB7CiAgICAgICAgbGV0IHBpZCA9IGN1cnJlbnQucGlkOwogICAgICAgIGxldCBwYXJlbnQgPSB0cmVlTWFwW3BpZF07CiAgICAgICAgaWYgKHBhcmVudCkgewogICAgICAgICAgcGFyZW50LmNoaWxkcmVuCiAgICAgICAgICAgID8gcGFyZW50LmNoaWxkcmVuLnB1c2goY3VycmVudCkKICAgICAgICAgICAgOiAocGFyZW50LmNoaWxkcmVuID0gW2N1cnJlbnRdKTsKICAgICAgICB9IGVsc2UgaWYgKHBpZCA9PT0gMCkgewogICAgICAgICAgYXJyLnB1c2goY3VycmVudCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBhcnI7CiAgICAgIH0sIFtdKTsKICAgICAgY29uc29sZS5sb2codHJlZURhdGEpOwogICAgICAvL3Z1ZSDkuK3nmoR2dWV45rqQ56CB5bCx5piv6L+Z5qC3CiAgICAgIC8vcmVkdWNl5YeP5bCR5b6q546v6YCS5b2S5qyh5pWwCiAgICAgIHRoaXMuZGF0YSA9IHRyZWVEYXRhOwogICAgfSwKICB9LAogIG1vdW50ZWQoKSB7fSwKfTsK"},{"version":3,"sources":["MyTree.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAgBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MyTree.vue","sourceRoot":".","sourcesContent":["<template>\n  <div>\n      <!-- v-if=\"data.length\"避免重复渲染 -->\n    <el-tree \n    :data=\"data\" \n    v-if=\"data.length\"\n    :default-expand-all='true'\n    :render-content=\"render\"\n    ></el-tree>\n    <!-- <span class='el-icon-folder'></span>\n            <span class='el-icon-folder-opened'></span>\n            <span class='el-icon-document'></span> -->\n  </div>\n</template>\n\n<script>\nimport _ from \"lodash\";\nexport default {\n  // props:['allData'],\n  props: {\n    allData: {\n      type: Array,\n      default: () => [],\n    },\n  },\n  data() {\n    return {\n      data: [],\n    };\n  },\n  watch: {//监控数据变化就更新视图\n    allData() {\n        this.transData();\n    },\n    // {\n    //             data.type? <span class='el-icon-folder'> : <span class='el-icon-document'></span>\n    //         }\n  },\n  methods: {\n    isParent(data){\n        return data.type == 'parent1'\n    },\n    render(h, { node, data }){\n        console.log(node, data.type);\n        return (<div>\n        {this.isParent(data)? node.expanded? <span class='el-icon-folder'></span>:<span class='el-icon-folder'></span>:<span class='el-icon-document'></span>}\n        \n        {data.name} \n        \n        </div>)\n    },\n    transData() {\n      let otherData = _.cloneDeep(this.allData);\n      console.log(otherData);\n      //数据映射\n      //{id:1,{name: '文件夹1', pid: 0, id: 1}}\n      let treeMap = otherData.reduce((newEle, ele) => {\n        //所以数据要进行克隆一份\n        ele.label = ele.name;\n        newEle[ele[\"id\"]] = ele;\n        return newEle;\n      }, []); //reduce的结果就是个对象\n      console.log(treeMap);\n      let treeData = treeMap.reduce((arr, current) => {\n        let pid = current.pid;\n        let parent = treeMap[pid];\n        if (parent) {\n          parent.children\n            ? parent.children.push(current)\n            : (parent.children = [current]);\n        } else if (pid === 0) {\n          arr.push(current);\n        }\n        return arr;\n      }, []);\n      console.log(treeData);\n      //vue 中的vuex源码就是这样\n      //reduce减少循环递归次数\n      this.data = treeData;\n    },\n  },\n  mounted() {},\n};\n</script>\n\n<style  scoped>\n</style>"]}]}